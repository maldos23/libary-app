# ─── DataSource ───────────────────────────────────────────────────────────────
quarkus.datasource.db-kind=sqlite
# En contenedor (GCP) la DB vive en /data; en local se usa ./library.db
quarkus.datasource.jdbc.url=jdbc:sqlite:${DB_PATH:./library.db}

# ─── Hibernate ORM ────────────────────────────────────────────────────────────
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=false

# ─── HTTP / CORS ──────────────────────────────────────────────────────────────
# Cloud Run inyecta $PORT automáticamente; el fallback es 8080
quarkus.http.port=${PORT:8080}
quarkus.http.host=0.0.0.0
# CORS abierto: permite cualquier origen (sin restricciones por ahora)
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization,Accept

# ─── OpenAPI ──────────────────────────────────────────────────────────────────
# Swagger UI solo en desarrollo; se deshabilita en prod para no exponer la superficie de ataque
%dev.quarkus.swagger-ui.always-include=true
%prod.quarkus.swagger-ui.always-include=false
quarkus.smallrye-openapi.info-title=Library API
quarkus.smallrye-openapi.info-version=1.0.0
quarkus.smallrye-openapi.info-description=API REST del Sistema de Gestión de Biblioteca

# ─── Límites de seguridad HTTP ────────────────────────────────────────────────
# Limitar el tamaño del cuerpo de la petición para prevenir ataques de payload masivo
quarkus.http.limits.max-body-size=100K
# Cerrar conexiones inactivas rápidamente
quarkus.http.idle-timeout=30S

# ─── Access Log (auditoría) ────────────────────────────────────────────────────
quarkus.http.access-log.enabled=true
quarkus.http.access-log.pattern=%h %l %u %t "%r" %s %b
# Nota: la cabecera Server se elimina en SecurityHeadersFilter (ContainerResponseFilter)